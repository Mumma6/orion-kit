---
title: Adding Internationalization (i18n)
description: Add multi-language support with next-intl
---

# Adding Internationalization (i18n)

Complete guide to adding multi-language support using next-intl.

## What You'll Get

- ✅ Multiple language support
- ✅ Locale-based routing (`/en`, `/sv`, `/de`)
- ✅ Type-safe translations
- ✅ Server and Client Components support
- ✅ Automatic language detection

## Why next-intl?

- Built for Next.js App Router
- Type-safe translations
- Server Components support
- Automatic namespace loading
- Small bundle size

## Step 1: Install Dependencies

```bash
pnpm add next-intl
```

## Step 2: Create Translation Files

Create `apps/app/messages/` directory:

```bash
mkdir -p apps/app/messages
```

### English Translations

Create `apps/app/messages/en.json`:

```json
{
  "common": {
    "loading": "Loading...",
    "error": "An error occurred",
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete"
  },
  "dashboard": {
    "title": "Dashboard",
    "welcome": "Welcome back, {name}!",
    "stats": {
      "totalTasks": "Total Tasks",
      "completed": "Completed",
      "inProgress": "In Progress",
      "todo": "To Do"
    }
  },
  "tasks": {
    "title": "Tasks",
    "createTask": "Create Task",
    "editTask": "Edit Task",
    "deleteTask": "Delete Task",
    "noTasks": "No tasks yet. Create your first task!",
    "form": {
      "title": "Title",
      "description": "Description",
      "status": "Status",
      "dueDate": "Due Date"
    }
  }
}
```

### Swedish Translations

Create `apps/app/messages/sv.json`:

```json
{
  "common": {
    "loading": "Laddar...",
    "error": "Ett fel uppstod",
    "save": "Spara",
    "cancel": "Avbryt",
    "delete": "Ta bort"
  },
  "dashboard": {
    "title": "Instrumentpanel",
    "welcome": "Välkommen tillbaka, {name}!",
    "stats": {
      "totalTasks": "Totalt Uppgifter",
      "completed": "Slutförda",
      "inProgress": "Pågående",
      "todo": "Att Göra"
    }
  },
  "tasks": {
    "title": "Uppgifter",
    "createTask": "Skapa Uppgift",
    "editTask": "Redigera Uppgift",
    "deleteTask": "Ta bort Uppgift",
    "noTasks": "Inga uppgifter än. Skapa din första uppgift!",
    "form": {
      "title": "Titel",
      "description": "Beskrivning",
      "status": "Status",
      "dueDate": "Förfallodatum"
    }
  }
}
```

## Step 3: Configure next-intl

Create `apps/app/i18n.ts`:

```typescript
import { getRequestConfig } from "next-intl/server";

export const locales = ["en", "sv", "de"] as const;
export type Locale = (typeof locales)[number];

export default getRequestConfig(async ({ locale }) => ({
  messages: (await import(`./messages/${locale}.json`)).default,
}));
```

## Step 4: Update Next.js Config

Update `apps/app/next.config.mjs`:

```javascript
import createNextIntlPlugin from "next-intl/plugin";

const withNextIntl = createNextIntlPlugin("./i18n.ts");

/** @type {import('next').NextConfig} */
const nextConfig = {
  // ... existing config
};

export default withNextIntl(nextConfig);
```

## Step 5: Add Locale Routing

Rename your `app/` directory to `app/[locale]/`:

```bash
# Backup first!
mv apps/app/app apps/app/app-backup

# Create new structure
mkdir -p apps/app/app/\[locale\]

# Move everything into [locale]
mv apps/app/app-backup/* apps/app/app/\[locale\]/

# Clean up
rm -rf apps/app/app-backup
```

Your structure should be:

```
apps/app/
├── app/
│   └── [locale]/
│       ├── dashboard/
│       ├── sign-in/
│       ├── sign-up/
│       ├── layout.tsx
│       └── page.tsx
├── messages/
│   ├── en.json
│   └── sv.json
└── i18n.ts
```

## Step 6: Update Root Layout

Update `apps/app/app/[locale]/layout.tsx`:

```typescript
import { NextIntlClientProvider } from "next-intl";
import { getMessages } from "next-intl/server";
import { notFound } from "next/navigation";
import { locales } from "@/i18n";

interface RootLayoutProps {
  children: React.ReactNode;
  params: { locale: string };
}

export async function generateStaticParams() {
  return locales.map((locale) => ({ locale }));
}

export default async function RootLayout({
  children,
  params: { locale },
}: RootLayoutProps) {
  // Validate locale
  if (!locales.includes(locale as any)) {
    notFound();
  }

  const messages = await getMessages();

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

## Step 7: Use Translations

### In Server Components

```typescript
import { useTranslations } from "next-intl";

export default function DashboardPage() {
  const t = useTranslations("dashboard");

  return (
    <div>
      <h1>{t("title")}</h1>
      <p>{t("welcome", { name: "John" })}</p>
    </div>
  );
}
```

### In Client Components

```typescript
"use client";

import { useTranslations } from "next-intl";

export function TasksList() {
  const t = useTranslations("tasks");

  return (
    <div>
      <h2>{t("title")}</h2>
      <button>{t("createTask")}</button>
    </div>
  );
}
```

## Step 8: Add Language Switcher

Create `apps/app/components/language-switcher.tsx`:

```typescript
"use client";

import { useLocale } from "next-intl";
import { useRouter, usePathname } from "next/navigation";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@workspace/ui/components/dropdown-menu";
import { Button } from "@workspace/ui/components/button";
import { Globe } from "lucide-react";

const languages = {
  en: "English",
  sv: "Svenska",
  de: "Deutsch",
};

export function LanguageSwitcher() {
  const locale = useLocale();
  const router = useRouter();
  const pathname = usePathname();

  const switchLocale = (newLocale: string) => {
    // Replace locale in pathname
    const newPathname = pathname.replace(`/${locale}`, `/${newLocale}`);
    router.push(newPathname);
  };

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="sm">
          <Globe className="mr-2 h-4 w-4" />
          {languages[locale as keyof typeof languages]}
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent>
        {Object.entries(languages).map(([code, name]) => (
          <DropdownMenuItem
            key={code}
            onClick={() => switchLocale(code)}
            className={locale === code ? "bg-accent" : ""}
          >
            {name}
          </DropdownMenuItem>
        ))}
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
```

## Step 9: Update Middleware

Update `apps/app/middleware.ts`:

```typescript
import createMiddleware from "next-intl/middleware";
import { locales } from "./i18n";

export default createMiddleware({
  locales,
  defaultLocale: "en",
  localePrefix: "always", // /en/dashboard, /sv/dashboard
});

export const config = {
  matcher: ["/((?!_next|.*\\..*).*)"],
};
```

## Advanced: Type-Safe Translations

Create types for your translations:

```typescript
// apps/app/types/i18n.ts
import en from "../messages/en.json";

type Messages = typeof en;

declare global {
  interface IntlMessages extends Messages {}
}
```

Now TypeScript will autocomplete translation keys!

## Best Practices

### 1. Keep Translations Flat

```typescript
// ✅ Good
{
  "tasks.title": "Tasks",
  "tasks.create": "Create Task"
}

// ❌ Bad - deep nesting is harder to manage
{
  "tasks": {
    "actions": {
      "create": {
        "button": {
          "label": "Create"
        }
      }
    }
  }
}
```

### 2. Use Namespaces

```typescript
// Separate by feature
const t = useTranslations("tasks"); // tasks.json
const c = useTranslations("common"); // common.json
```

### 3. Handle Plurals

```typescript
{
  "tasks.count": {
    "zero": "No tasks",
    "one": "1 task",
    "other": "{count} tasks"
  }
}

// Usage
t("tasks.count", { count: taskCount });
```

## Testing

```bash
# Test different locales
http://localhost:3001/en/dashboard
http://localhost:3001/sv/dashboard
http://localhost:3001/de/dashboard
```

## Deployment

No special configuration needed! next-intl works on Vercel out of the box.

## Alternatives

- **react-i18next** - More established, larger bundle
- **FormatJS (react-intl)** - Feature-rich, complex API
- **Lingui** - Smaller bundle, less Next.js specific

## Learn More

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [Next.js i18n Routing](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
